# Configurable parameters: fileName, storagePath,
# scrapeInterval, evaluationInterval, scrapeTimeout,
# privateIp, externalPort, maxConcurrency, maxSamples,
# timeout

# fileName: The location of the Prometheus
# Config File that is being created by this template.
# We recommend keeping this file in the same folder
# path where you have other config files pertaining to
# the Yugabyte platform (must be an absolute file path).

# storagePath: If you want to keep your prometheus data
# in a NAS location or mount path with a lot of storage,
# change this parameter in the service file to dictate
# which location you want to use. Keep in mind that
# Prometheus data grows quickly as you have more
# universes (must be an absolute directory path).

# scrapeInterval: The interval of time between the Prometheus
# instance scraping for database metrics on the Yugabyte Platform
# instance. Defaults to 15s, override if you wish for Prometheus
# to scrape for metrics at a faster or slower rate.

# evaluationInterval: The interval of time between the Prometheus
# instance scraping for evaluation metrics on the Yugabyte Platform
# instance. Defaults to 15s, override if you wish for Prometheus
# to scrape for evaluation metrics at a faster or slower rate.

# scrapeTimeout: The time threshold for inactivity after which the
# Prometheus instance will stop scraping for database metrics on the
# Yugabyte Platform instance. Defaults to 10s, override if you wish
# for the inactivity threshold to be longer or shorter.

# privateIp: The IP address corresponding to the running Prometheus
# instance. Defaults to 127.0.0.1 (localhost), override if you wish
# to run Platform on a different private IP.

# externalPort: The external port that is used by the running
# Prometheus instance. Defaults to 9090, override if you have opened
# up a different port that you wish to use for running Prometheus.

# maxConcurrency: The maximum number of concurrent queries
# that can be executed by the running Prometheus instance as
# it scrapes for metrics. Defaults to 20, override if you wish
# for the number of concurrent queries executable by Prometheus
# to be higher or lower.

# maxSamples: The maximum number of samples that a single
# Prometheus query can load into memory. Defaults to 5000000,
# override if you wish for the maximum number of samples loadable
# by a single Prometheus query to be higher or lower.

# timeout: The time threshold for inactivity after which the
# Prometheus service will be declared inactive. Defaults to 30s,
# override if you wish for the inactivity threshold to be longer or
# shorter.
prometheus:
    fileName: "/etc/prometheus/prometheus.yml"
    storagePath: "/var/lib/prometheus/"
    scrapeInterval: 15
    evaluationInterval: 15
    scrapeTimeout: 10
    privateIp: "127.0.0.1"
    externalPort: 9090
    appExternalPort: 9000
    maxConcurrency: 20
    maxSamples: 5000000
    timeout: 30

# Configurable parameters: fileName,
# platformDbUser, platformDbPassword
# devopsHome, swamperTargetPath, metricsUrl,
# useOauth, ybSecurityType, ybOidcClientId,
# ybOidcSecret, ybOidcDiscoveryUri, ywUrl,
# ybOidcScope, ybOidcEmailAtr, privateIp,
# externalPort

# (PLATFORM_APP_SECRET and CORS_ORIGIN will
# be automatically generated by the installer)

# fileName: The location of the Platform
# Config File that is being created by this template.
# We recommend keeping this file in the same folder
# path where you have other config files pertaining to
# the Yugabyte platform (must be an absolute file path).

# platformDbUser: The username corresponding to the
# Postgres database that is running under the hood
# for Yugabyte platform. Default username is postgres,
# override if you wish to change the username.

# platformDbPassword: The password corresponding to
# the Postgres database that is running under the
# hood for Yugabyte platform. Default password is
# the empty string, override if you wish to change the
# password.

# devopsHome: The location of the devops folder
# on your installation system. Default location is
# /opt/yugabyte/devops, override if you have manually
# configured your install and have the devops folder in
# a different location (must be an absolute directory path).

# swamperTargetPath: The location of the swamper_targets
# folder on your installation system. Default location is
# /opt/yugabyte/swamper_targets, override if you have
# manually configured your install and have the swamper_targets
# folder in a different location (must be an absolute
# directory path).

# metricsUrl: The URL where the Prometheus metrics for
# the Yugabyte platform are displayed. Only change
# the URL if you have not configured your firewall to
# open it up to port 9090, and don't plan to use the
# Prometheus endpoint directly, or have used a different
# port instead (must be a valid url).

# useOauth: The boolean that determine if OIDC SSO needs to be
# enabled on the Platform. Default to false, but override
# it to true if you intend on using OIDC SSO for your platform
# installation (must be a boolean).

# ybSecurityType: The Security Type corresponding to the
# OIDC SSO for your platform installation. Only set this
# field if you intend on using OIDC SSO for your platform
# installation (otherwise leave it empty).

# ybOidcClientId: The Client Id corresponding to the
# OIDC SSO for your platform installation. Only set this
# field if you intend on using OIDC SSO for your platform
# installation (otherwise leave it empty).

# ybOidcSecret: The OIDC Secret Key corresponding to the
# OIDC SSO for your platform installation. Only set this
# field if you intend on using OIDC SSO for your platform
# installation (otherwise leave it empty).

# ybOidcDiscoveryUri: The OIDC Discovery URI corresponding to the
# OIDC SSO for your platform installation. Only set this
# field if you intend on using OIDC SSO for your platform
# installation (otherwise leave it empty, must be a valid url).

# ywWrl: The Platform IP corresponding to the
# OIDC SSO for your platform installation. Only set this
# field if you intend on using OIDC SSO for your platform
# installation (otherwise leave it empty, must be a valid url).

# ybOidcScope: The OIDC Scope corresponding to the
# OIDC SSO for your platform installation. Only set this
# field if you intend on using OIDC SSO for your platform
# installation (otherwise leave it empty).

# ybOidcEmailAtr: The OIDC Email Attr corresponding to the
# OIDC SSO for your platform installation. Only set this
# field if you intend on using OIDC SSO for your platform
# installation (otherwise leave it empty, must be a valid
# email address).

# privateIp: The IP address corresponding to the running Platform
# instance. Defaults to 127.0.0.1 (localhost), override if you wish
# to run Platform on a different private IP.

# externalPort: The external port that is used by the running
# Platform instance. Defaults to 5432, override if you have opened
# up a different port that you wish to use for running Yugabyte
# Platform.
platform:
   fileName: "/opt/yugabyte/platform.conf"
   platformDbUser: "postgres"
   platformDbPassword: ""
   devopsHome: "/opt/yugabyte/devops"
   swamperTargetPath: "/opt/yugabyte/swamper_targets"
   metricsUrl: "http://127.0.0.1:9090/api/v1"
   swamperRulesPath: "/opt/yugabyte/swamper_rules"
   metricsManagementUrl: "http://127.0.0.1:9090/-"
   useOauth: false
   ybSecurityType: ""
   ybOidcClientId: ""
   ybOidcSecret: ""
   ybOidcDiscoveryUri: ""
   ywUrl: ""
   ybOidcScope: ""
   ybOidcEmailAttr: ""
   privateIp: "127.0.0.1"
   externalPort: 5432

# Configurable parameters: mode, fileName, serverName, privateIp,
# containerExposedPort, uploadSize

# mode: Whether or not you want to run Nginx in
# http mode or https mode. Defaults to http mode,
# modify it if you want to run Nginx in https mode
# instead.

# fileName: The location of the Nginx
# Config File that is being created by this template.
# We recommend keeping this file in the same folder
# path where you have other config files pertaining to
# the Yugabyte platform (must be an absolute file path).

# serverName: The name of the Nginx server name
# that is used by customers if they want to add
# a proxy in front of the platform service. Set
# this field if you want to customize the
# server name.

# privateIp: The IP address corresponding to the running Nginx
# instance. Defaults to 127.0.0.1 (localhost), override if you wish
# to run Nginx on a different private IP.

# containerExposedPort: The external port that is used by the running
# Nginx instance. Defaults to 9000, override if you have opened
# up a different port that you wish to use for running Nginx.

# uploadSize: The client max body size supported by the running
# Nginx instance. Defaults to 100G, override if you wish to specify
# a different maximum upload size.
nginx:
   mode: "https"
   fileName: "/etc/nginx/nginx.conf"
   serverName: "_"
   privateIp: "127.0.0.1"
   containerExposedPort: 9000
   uploadSize: 100

# Configurable parameter: overrideWarning

# overrideWarning: Set this variable to true if you wish
# to override all warning level preflight checks during the
# Yba-installer installation (defaults to false, so both
# critical and warning checks are performed in the normal case)
preflight:
   overrideWarning: false

# For random entries that might be pulled in to platform.conf
# (No JSON schema validation needed here as the format is not
# fixed).
random:

# Edit this section if you are bringing in your
# own version of Python to the Yugabyte
# Platform Installation. Make sure you specify
# all the required fields correctly, and specify
# bringOwn = true (default false).
postgres:
   bringOwn: false
   dataPath: "/var/lib/pgsql/11/data/"
   postmasterPath: "/usr/pgsql-11/bin/postmaster"
   version: "11"
   port: "5432"
   pgHbaConf: "/var/lib/pgsql/11/data/pg_hba.conf"
   postgresConf: "/var/lib/pgsql/11/data/postgresql.conf"
   systemdLocation : "/usr/lib/systemd/system/postgresql-11.service"

# Edit this section if you are bringing in your
# own version of Python to the Yugabyte
# Platform Installation. Make sure you specify
# all the required fields correctly, and specify
# bringOwn = true (default false).
python:
   bringOwn: false
   path: "/usr/bin/python3"
   version: 3.6

# The data directories where all of your Yugabyte Platform installation reside,
# defaults to /opt/yugabyte for Platform, Prometheus and Postgres.
# Edit if you are performing a custom installation of Yugabyte Platform and have your
# data directories in a different location.
baseDirs:
   - "/opt/yugabyte"

# The dataVolumes section refers to any directories that are not
# deleted during the uninstall operation of yba-installer. Edit this
# section if you have any more directories that you would like preserved
# during uninstalls of Yugabyte Platform, and add it to the list. All
# data volumes must have a baseDir corresponding to the baseDir specified in
# the configuration setting above (separate directories for platform, postgres,
# and prometheus)
dataVolumes:
   platform:
      - "/opt/yugabyte/data"
   prometheus:
      - "/opt/yugabyte/swamper_targets"
      - "/opt/yugabyte/swamper_rules"
